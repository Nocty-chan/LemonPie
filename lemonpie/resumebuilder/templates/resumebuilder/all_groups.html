{% extends "core/body.html" %}

{% block page_title %}
List of All Groups
{% endblock %}


{% block breadcrumb %}
<li class="active"> All Groups </li>
{% endblock %}

{% block content %}
  {% if group_entry_list %}
  <div class="box">
    <div class="box-header">
      <h3 class="box-title"> Groups </h3>
    </div>
    <div class="box-body table-responsive no-padding">
      <table class="table table-hover" role="grid">
        <thead>
          <tr>
            <th> Type </th>
            <th> Name </th>
            <th> Options </th>
          </tr>
        </thead>
        <tbody
          {% for group_entry in group_entry_list %}
            <tr>
              <th> {{ group_entry.get_group_type_str }} </th>
              <th> {{ group_entry.name }} </th>
              <th>
                <button type="button" class="btn" data-toggle="modal" data-target="#deleteModal{{group_entry.id}}">
                  <i class="fa fa-trash"></i>
                  <span>Delete</span>
                </button>
                <a href="{% url 'resumebuilder:group_view' group_entry.id %}" class="btn" role="button">
                  <i class="fa fa-edit"></i>
                  <span>Modify</span>
                </a>
              </th>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  {% else %}
      <p>No Groups are available.</p>
  {% endif %}

<form action="{% url 'resumebuilder:add_new_group' %}" method="post">
{% csrf_token %}
<input type="submit" value="Add" />
</form>

{% if group_entry_list %}
{% for group_entry in group_entry_list %}
<!-- Modal -->
<div class="modal modal-danger fade" id="deleteModal{{group_entry.id}}" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="pull-right close" data-dismiss="modal">x</button>
        <h4 class="modal-title">Group delete</h4>
      </div>
      <div class="modal-body">
        <p>This will permanently delete the group. Entries belonging to the group will remain untouched.
          Group will be removed from all the CVs it was in.
          Are you sure you want to delete this group?
        </p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-outline" data-dismiss="modal"> Cancel </button>
        <a type="button" class="btn btn-outline pull-left"
        href="{% url 'resumebuilder:delete_group' group_entry.id %}">
        Confirm
      </a>
    </div>
  </div>
</div>
</div>
{% endfor %}
{% endif %}
{% endblock %}
